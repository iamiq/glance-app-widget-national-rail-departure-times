
          - type: custom-api
            title: FROM â†’ TO
            cache: 1m
            url: https://transportapi.com/v3/uk/train/station_timetables/DEP.json?app_id=${TRANSPORT_API_ID}&app_key=${TRANSPORT_API_KEY}&live=true
            template: |
              {{ $services := .JSON.Array "departures.all" }}
              <div class="flex flex-column gap-5">
                {{ $count := 0 }}
                {{ range $services }}
                  {{ $dest := .String "destination_name" }}
                  {{ $op := .String "operator_name" }}
                  {{ if and (eq $dest "London Cannon Street") (eq $op "Southeastern") }}
                    {{ $count = add $count 1 }}
                    {{ $aim := .String "aimed_departure_time" }}
                    {{ $exp := .String "expected_departure_time" }}
                    {{ $status := .String "status" }}

                    <div class="flex justify-between items-center" style="padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.1);">
                      <div class="flex items-center gap-10">
                        <span class="size-h4">{{ $aim }}</span>
                        <span class="size-h4">Cannon Street</span>
                      </div>
                      <div class="text-right">
                        <span class="size-h5 {{ if eq $status "ON TIME" }}color-positive{{ else if or (eq $status "LATE") (eq $status "DELAYED") }}color-negative{{ else }}color-primary{{ end }}">
                          {{ if and (ne $exp "") (ne $exp $aim) }}{{ $status }} ({{ $exp }}){{ else }}{{ $status }}{{ end }}
                        </span>
                      </div>
                    </div>
                  {{ end }}
                {{ end }}

                {{ if eq $count 0 }}
                  <div class="color-subdue">No Southeastern services to Cannon Street</div>
                {{ end }}
              </div>
